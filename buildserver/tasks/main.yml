---
# tasks file for buildserver
- name: install packages
  apt: name={{item}} state=present update_cache=yes
  with_items:
    - docker.io
    - python3-pip
    - python-pip

- name: install docker and docker-compose
  pip: name={{item}} state=present
  with_items:
    - docker
    - docker-compose

- name: copy docker files
  copy: src=./ dest=/home/

- name: build images
  docker_compose:
    project_src: /home
    state: present

- name: push boxfuse image to docker hub
  docker_image:
    name: tomcat:8.0-alpine
    repository: galend/devops_trainings:boxfuse
    push: yes
    source: local